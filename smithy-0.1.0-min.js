define("smithy/declare",[],function(){function a(e,t){throw new Error("declare"+(t?" "+t:"")+": "+e)}function f(e,t){var r=[],s=[{cls:0,refs:[]}],o={},u=1,f=e.length,l=0,c,h,p,d,v,m,g,y;for(l=0;l<f;l+=1){p=e[l],p?n.call(p)!=="[object Function]"&&a("mixin #"+l+" is not a callable constructor.",t):a("mixin #"+l+" is unknown. Did you use dojo.require to pull it in?",t),h=p._meta?p._meta.bases:[p],d=0;for(c=h.length-1;c>=0;c-=1)v=h[c].prototype,v.hasOwnProperty("declaredClass")||(v.declaredClass="uniqName_"+(i+=1)),g=v.declaredClass,o.hasOwnProperty(g)||(o[g]={count:0,refs:[],cls:h[c]},u+=1),m=o[g],d&&d!==m&&(m.refs.push(d),d.count+=1),d=m;d.count+=1,s[0].refs.push(d)}while(s.length){d=s.pop(),r.push(d.cls),u-=1;while((y=d.refs).length===1){d=y[0];if(!d||(d.count-=1)){d=0;break}r.push(d.cls),u-=1}if(d)for(l=0,f=y.length;l<f;l+=1)d=y[l],(d.count-=1)||s.push(d)}return u&&a("can't build consistent linearization",t),p=e[0],r[0]=p?p._meta&&p===r[r.length-p._meta.bases.length]?p._meta.bases.length:1:0,r}function c(e,n,r){var i,o,u,f,l,c,h,p,d,v=this._inherited=this._inherited||{};typeof e=="string"&&(i=e,e=n,n=r),r=0,f=e.callee,i=i||f.nom,i||a("can't deduce a name to call inherited()",this.declaredClass),l=this.constructor._meta,u=l.bases,d=v.p;if(i!==s){if(v.c!==f){d=0,c=u[0],l=c._meta;if(l.hidden[i]!==f){o=l.chains,o&&typeof o[i]=="string"&&a("calling chained method with inherited: "+i,this.declaredClass);do{l=c._meta,h=c.prototype;if(l&&(h[i]===f&&h.hasOwnProperty(i)||l.hidden[i]===f))break}while(c=u[d+=1]);d=c?d:-1}}c=u[d+=1];if(c){h=c.prototype;if(c._meta&&h.hasOwnProperty(i))r=h[i];else{p=t[i];do{h=c.prototype,r=h[i];if(r&&(c._meta?h.hasOwnProperty(i):r!==p))break}while(c=u[d+=1])}}r=c&&r||t[i]}else{if(v.c!==f){d=0,l=u[0]._meta;if(l&&l.ctor!==f){o=l.chains,(!o||o.constructor!=="manual")&&a("calling chained constructor with inherited",this.declaredClass);while(c=u[d+=1]){l=c._meta;if(l&&l.ctor===f)break}d=c?d:-1}}while(c=u[d+=1]){l=c._meta,r=l?l.ctor:c;if(r)break}r=c&&r}v.c=r,v.p=d;if(r)return n===!0?r:r.apply(this,n||e)}function h(e,t){return typeof e=="string"?this.__inherited(e,t,!0):this.__inherited(e,!0)}function p(e,t,n){var r=this.getInherited(e,t);if(r)return r.apply(this,n||t||e)}function v(e){var t,n=this.constructor._meta.bases;for(t=0,l=n.length;t<l;t+=1)if(n[t]===e)return!0;return this instanceof e}function m(e,t){var n;for(n in t)n!==s&&t.hasOwnProperty(n)&&(e[n]=t[n])}function g(e,r){var i,o;for(i in r)o=r[i],(o!==t[i]||!(i in t))&&i!==s&&(n.call(o)==="[object Function]"&&(o.nom=i),e[i]=o);return e}function y(e){return N.safeMixin(this.prototype,e),this}function b(e,t){return function(){var n=arguments,r=n,i=n[0],s,o,u,a=e.length,f;if(!(this instanceof n.callee))return T(n);if(t&&(i&&i.preamble||this.preamble)){f=new Array(e.length),f[0]=n;for(o=0;;){i=n[0],i&&(s=i.preamble,s&&(n=s.apply(this,n)||n)),s=e[o].prototype,s=s.hasOwnProperty("preamble")&&s.preamble,s&&(n=s.apply(this,n)||n);if((o+=1)===a)break;f[o]=n}}for(o=a-1;o>=0;o-=1)s=e[o],u=s._meta,s=u?u.ctor:s,s&&s.apply(this,f?f[o]:n);s=this.postscript,s&&s.apply(this,r)}}function w(e,t){return function(){var n=arguments,r=n,i=n[0],s;if(!(this instanceof n.callee))return T(n);t&&(i&&(s=i.preamble,s&&(r=s.apply(this,r)||r)),s=this.preamble,s&&s.apply(this,r)),e&&e.apply(this,n),s=this.postscript,s&&s.apply(this,n)}}function E(e){return function(){var t=arguments,n=0,r,i;if(!(this instanceof t.callee))return T(t);for(;r=e[n];n+=1){i=r._meta,r=i?i.ctor:r;if(r){r.apply(this,t);break}}r=this.postscript,r&&r.apply(this,t)}}function S(e,t,n){return function(){var r,i,s,o=0,u=1;n&&(o=t.length-1,u=-1);for(;r=t[o];o+=u)i=r._meta,s=(i?i.hidden:r.prototype)[e],s&&s.apply(this,arguments)}}function x(e){r.prototype=e.prototype;var t=new r;return r.prototype=null,t}function T(e){var t=e.callee,n=x(t);return t.apply(n,e),n}function N(r,i,l){typeof r!="string"&&(l=i,i=r,r=""),l=l||{};var p,g,T,C,k,L,A,O=1,M=i;n.call(i)==="[object Array]"?(L=f(i,r),T=L[0],O=L.length-T,i=L[O]):(L=[0],i?n.call(i)==="[object Function]"?(T=i._meta,L=L.concat(T?T.bases:i)):a("base class is not a callable constructor.",r):i!==null&&a("unknown base class. Did you use dojo.require to pull it in?",r));if(i)for(g=O-1;;g-=1){p=x(i);if(!g)break;T=L[g],(T._meta?m:e)(p,T.prototype),C=new Function,C.superclass=i,C.prototype=p,i=p.constructor=C}else p={};N.safeMixin(p,l),T=l.constructor,T!==t.constructor&&(T.nom=s,p.constructor=T);for(g=O-1;g;g-=1)T=L[g]._meta,T&&T.chains&&(A=e(A||{},T.chains));p["-chains-"]&&(A=e(A||{},p["-chains-"])),T=!A||!A.hasOwnProperty(s),L[0]=C=A&&A.constructor==="manual"?E(L):L.length===1?w(l.constructor,T):b(L,T),C._meta={bases:L,hidden:l,chains:A,parents:M,ctor:l.constructor},C.superclass=i&&i.prototype,C.extend=y,C.prototype=p,p.constructor=C,p.getInherited=h,p.isInstanceOf=v,p.inherited=d,p.__inherited=c,r&&(p.declaredClass=r,u.setObject(r,C,o));if(A)for(k in A)p[k]&&typeof A[k]=="string"&&k!==s&&(T=p[k]=S(k,L,A[k]==="after"),T.nom=k);return C}var e,t,n,r,i,s,o="ORELang",u={_mixin:function(e,t,n){var r,i,s,o={};for(r in t)if(t.hasOwnProperty(r)){i=t[r];if(!e.hasOwnProperty(r)||e[r]!==i&&(!o.hasOwnProperty(r)||o[r]!==i))e[r]=n?n(i):i}return e},mix:function(){var e,t,n;for(t=0,n=arguments.length;t<n;t+=1)e=u.mixin(e,arguments[t]);return e},mixin:function(e,t){var n,r;arguments.length===1&&(t=e);for(r=1,n=arguments.length;r<n;r+=1)u._mixin(e,arguments[r]);return e},getProp:function(e,t,n){var r,i=0;while(n&&typeof (r=e[i+=1])!="undefined")n=typeof n[r]=="undefined"?n[r]:t?n[r]={}:undefined;return n},setObject:function(e,t,n){n=n||o;var r=e.split("."),i=r.pop(),s=u.getProp(r,!0,n);return s&&i?s[i]=t:undefined},getObject:function(e,t,n){var r,i;return n=n||o,u.isArray(e)?i=e.map(function(e){var r={},i,s;if(u.isObject(e)){for(i in e)e.hasOwnProperty(i)&&(r[i]=u.getProp(e[i].split("."),t,n));s=r}else s=u.getProp(e.split("."),t,n);return s}):(r=e.split("."),i=u.getProp(r,t,n)),i},exists:function(e,t){return u.getObject(e,!1,t)!==undefined}};e=u.mixin,t=Object.prototype,n=t.toString,r=function(){},i=0,s="constructor";var d=p;return u.safeMixin=N.safeMixin=g,u.declare=N,u.declare}),define("smithy/Logger",[],function(){var e=function(e,t,n){var r={TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},i,s=[];e=r[e.toUpperCase()],t||(t=console),typeof n=="undefined"&&(n=""),i=function(e,r,i,o,u){var a=t[e]||t.info;r=n+r;if(o)i?a.call(t,r+" --> "+JSON.stringify(i)):a.call(t,r);else try{u[0]&&(u[0]=n+u[0]),a.apply(t,u)}catch(f){a(r,i,o,u)}s.forEach(function(t){t.log(e,r,i,o)})},this.addPlugin=function(e){s.push(e)},this.trace=function(t,n,s){e<=r.TRACE&&i("debug",t,n,s,arguments)},this.debug=function(t,n,s){e<=r.DEBUG&&i("debug",t,n,s,arguments)},this.info=function(t,n,s){e<=r.INFO&&i("info",t,n,s,arguments)},this.warn=function(t,n,s){e<=r.WARN&&i("warn",t,n,s,arguments)},this.error=function(t,n,s){e<=r.ERROR&&i("error",t,n,s,arguments)},this.time=function(e){t.time.apply(t,arguments)},this.timeEnd=function(e){t.timeEnd.apply(t,arguments)}};return e}),define("smithy/util",["./declare","./Logger"],function(e,t){var n=new t("debug"),r=e(null,{mixin:function(e,t){for(name in t)e[name]=t[name];return e},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},isUndefined:function(e){return typeof e=="undefined"}});return r}),define("smithy/GadgetFactory",["./declare"],function(e){var t=e(null,{constructor:function(e){this.resolver=e&&e.resolver,this.resolverAsync=e&&e.resolverAsync},getGadget:function(e,t){if(!this.resolver)throw new Error("No synchronous resolver was configured for this factory.");var n=this.resolver(e);return new n(t)},getGadgetAsync:function(e,t,n,r){if(!this.resolverAsync)throw new Error("No async resolver was configured for this factory.");this.resolverAsync(e,function(e){var i=new e(t);n.call(r,i)},this)}});return t}),define("smithy/lifecycle/Registry",["../declare","../util"],function(e,t){var n=new t,r=e(null,{locPublishes:"publishes",locSubscribes:"subscribes",locServices:"services",locPreferences:"preferences",locGadgets:"gadgets",constructor:function(){var e={};e[this.locPublishes]={},e[this.locSubscribes]={},this.getRegistryLocation=function(t){return e[t]||(e[t]={}),e[t]},this.getRegistryItem=function(e,t){return this.getRegistryLocation(e)[t]},this.addToRegistry=function(e,t,n){this.getRegistryLocation(e)[t]=n},this.removeFromRegistry=function(t,r){n.isUndefined(this.getRegistryLocation(t)[r])||delete e[t][r]},this.enumerateEntries=function(e,t,r){var i=this.getRegistryLocation(e);n.isUndefined(i)||Object.keys(i).forEach(function(e,n,s){var o=i[e];t.call(r,o,e,i)})}}});return r}),define("smithy/AmdResolver",["./declare"],function(e){var t=e(null,{constructor:function(e){var t=e&&e.path,n=e&&e.loud,r=e&&e.altSeparator,i=e&&e.synchronous;this.resolver=function(e,s){var o,u=e;e.indexOf(r||"/")<0&&(u=t+e),r&&(u=u.replace(new RegExp(r,"g"),"/"));try{dojo?require({async:!i},[u],function(e){o=e}):require([u],function(e){o=e})}catch(a){if(n)throw a}return o}}});return t}),define("smithy/WebStorage",["./declare"],function(e){var t=e(null,{constructor:function(e){var t=e&&e.namespace||this.declaredClass,n=function(e,n){var r=JSON.parse(n.getItem(t));return r[e]},r=function(e,n,r){var i=JSON.parse(r.getItem(t));i[e]=n,r.setItem(t,JSON.stringify(i))};if(!localStorage)throw new Error("Web storage is not supported by this runtime.");Object.defineProperty(this,"localStorage",{get:function(){return localStorage},set:function(e){throw new Error("The storage attribute is protected.")},enumerable:!0}),Object.defineProperty(this,"sessionStorage",{get:function(){return sessionStorage},set:function(e){throw new Error("The storage attribute is protected.")},enumerable:!0}),this.localStorage.getItem(t)||this.localStorage.setItem(t,"{}"),this.sessionStorage.getItem(t)||this.sessionStorage.setItem(t,"{}"),this.isLocalEmpty=function(){return this.localStorage.getItem(t)==="{}"},this.isSessionEmpty=function(){return this.sessionStorage.getItem(t)==="{}"},this.clearSession=function(){this.sessionStorage.setItem(t,"{}")},this.clearLocal=function(){this.localStorage.setItem(t,"{}")},this.getLocalObject=function(e){return n(e,this.localStorage)},this.setLocalObject=function(e,t){r(e,t,this.localStorage)},this.getSessionObject=function(e){return n(e,this.sessionStorage)},this.setSessionObject=function(e,t){r(e,t,this.sessionStorage)}}});return t}),define("smithy/Slag",["./declare","./WebStorage"],function(e,t){var n=e(null,{constructor:function(e){var n=this;this.changeEvent=e.changeEvent||function(){},e.useWebStorage?this.storage=new t({namespace:"SmithySlag"}):(this.data={},this.storage={setLocalObject:function(e,t){n.data[e]=t},getLocalObject:function(e){return n.data[e]},setSessionObject:function(e,t){n.storage.setLocalObject(e,t)},getSessionObject:function(e){n.storage.getLocalObject(e)}})},get:function(e){return this.storage.getLocalObject(e)},set:function(e,t){var n=this.storage.getLocalObject(e);this.storage.setLocalObject(e,t),this.changeEvent({path:e,oldValue:n,newValue:t})}});return n}),define("smithy/BasePlate",["./declare","./util","./AmdResolver","./Logger","./Slag"],function(e,t,n,r,i){var s=["GadgetStatusChange","AreaStatusChange","GadgetSpaceStatusChange","GadgetRegistrationEvent","SlagChange"],o=["GadgetAreaSchema"],u,a=new t,f=new r("debug"),l=e(null,{constructor:function(e){var t,r,o={hasMessaging:!a.isUndefined(e.channelFactory),hasModels:!a.isUndefined(e.modelFactory),hasServices:!a.isUndefined(e.serviceFactory)},l=this;this.config=e,this.config.features=this.features=o,this.pub={},o.hasMessaging&&(e.factoriesConfigured||e.channelFactory.addResolver((new n({path:"smithy/schema/channels/",synchronous:!0})).resolver)),s.forEach(function(t){if(o.hasMessaging){var n=e.channelFactory.get(t,l,"framework");l.pub[t]=function(e){f.debug("Sending message ["+t+"] from base plate",e),n.publish(e)}}else l.pub[t]=function(e){f.debug("Bullhorn not available for publishing on ["+t+"] from base plate",e)}}),this.asModel=function(){},o.hasModels&&(e.factoriesConfigured||e.modelFactory.addResolver((new n({path:"smithy/schema/models/",synchronous:!0})).resolver),this.asModel=function(e){return this.config.modelFactory.getModel(e,this)}),u||(u=new i({useWebStorage:e.useWebStorageForSlag,changeEvent:this.pub.SlagChange})),this.setSlagData=function(e,t){u.set(e,t)},this.getSlagData=function(e){u.get(e)},this.loadModelData=function(e,t,n){n.error()},this.saveModelData=function(e,t,n){n.error()},o.hasServices&&(this.loadModelData=function(t,n,r){var i,s=e.serviceFactory.getServiceForModel(t);s.readModel({id:n},r)},this.saveModelData=function(t,n,r){var i,s=e.serviceFactory.getServiceForModel(t);n?s.updateModel({id:n},r):s.createModel({id:n},r)}),e.factoriesConfigured=!0}});return l}),define("smithy/Query",[],function(){var e=function(t,n){if(window.JSONQuery)return window.JSONQuery(t,n)};return e}),define("smithy/GadgetArea",["./declare","./util","./Logger","./BasePlate","./Query"],function(e,t,n,r,i){var s=new t,o=n("debug"),u=e(r,{constructor:function(e){var t=this;this.config=s.mixin({percentage:100},e),this.subAreas=[],Object.defineProperty(this,"address",{get:function(){return t.getAddress()},enumerable:!0})},initialize:function(){this.statusChange("CREATED")},getViewFactory:function(){return this.config.windowRef.window.smithyProxy.viewFactory},getGadgetFactory:function(){return this.config.windowRef.window.smithyProxy.gadgetFactory},statusChange:function(e){this.pub.AreaStatusChange({address:this.getAddress(),status:e})},layout:{address:function(e,t){var n=["left","right","top","bottom","center"],r;return t==="borders"?r=n[e]:t!=="gadget"&&(r=t+"["+e+"]"),r},layout:function(e,t){var n=["left","right","top","bottom","center"];t!=="gadget"&&(n.forEach(function(t,n){e[t]=e.subAreas[n]}),e[t]=e.subAreas)},render:function(e,t){var n=["left","right","top","bottom","center"],r=e.config.parent;t==="gadget"?e.gadget&&!e.view&&(e.gadget.setupView(),e.view=e.getGadget().getView(),r.render()):(e.view||(e.view=e.getViewFactory().createView(e,t)),e.subAreas.forEach(function(i,s){var o=t==="borders"?n[s]:undefined;i&&(i.render(),e.view.hasChild(i.view)||e.view.addChild(i.view,o),r.renderedOnce&&!r.view.hasChild(e.view)&&r.render())}),e.view.startup())},remove:function(e,t,n){var r=["left","right","top","bottom","center"];n==="borders"?(e.subAreas[t]=undefined,e[r[t]]=undefined):e.subAreas.splice(t,1)},index:function(e,t){var n,r={left:0,right:1,top:2,bottom:3,center:4};return t==="borders"?n=r[e]:t!=="gadget"&&(n=e.match(/[0-9]+/)[0]),n},impliedMode:function(e){var t={win:"windows",row:"rows",col:"columns",tab:"tabs"},n=t[e.substring(0,3)];return n||"borders"}},getAddress:function(e){var t="";return this.config.parent&&(t=this.config.parent.getAddress(this)),e&&(t=t+"/"+this.getSubAddress(e)),t},getSubAddress:function(e){var t="";return this.subAreas.forEach(function(n,r){n===e&&(t=this.layout.address(r,this.config.layoutMode))},this),t},setLayoutMode:function(e,t){this.config.layoutMode=e,t&&this.layout.layout(this,e)},addArea:function(e,t,n){var r=e.charAt(0)==="/"?e.slice(1):e,i=r.split("/"),o=i.shift(),u,a=!i.length,f,l={};this.config.layoutMode||(this.config.layoutMode=this.layout.impliedMode(o)),u=o==="next"?this.subAreas.length:this.layout.index(o,this.config.layoutMode);if(!this.subAreas[u]){s.mixin(l,this.config);if(!t&&!a)throw new Error("Missing intermediate area: "+o);l.parent=this,l.layoutMode=this.layout.impliedMode(i[0]||o),a?this.subAreas[u]=n||this.createSubArea(l):this.subAreas[u]=this.createSubArea(l),this.subAreas[u].initialize()}return a?f=this.subAreas[u]:f=this.subAreas[u].addArea(i.join("/"),t,n),this.setLayoutMode(this.config.layoutMode,!0),f},createSubArea:function(e){return new u(e)},removeArea:function(e){var t=this.getArea(e);return t.config.parent.removeSubArea(t)},removeSubArea:function(e){return s.some(this.subAreas,function(t,n){t===e&&this.removeSubAreaAtIndex(t,n)},this),e},removeSubAreaAtIndex:function(e,t){return this.view&&this.view.removeChild(e.view),e.destroy(),this.layout.remove(this,t,this.config.layoutMode),e},getArea:function(e){var t=e.replace(/\//g,"."),n;return t.charAt(0)!=="."&&(t="."+t),n=this.getAreas(t),n.length?n[0]:n},getAreas:function(e){return i(e,this)},setGadget:function(e,t){this.setLayoutMode("gadget"),this.gadget=e,this.gadget.parent=this,this.gadgetDescriptor=t},removeGadget:function(){var e=this.config.parent;this.gadget&&(this.view!==this.gadget?this.view.destroy():e&&e.view.removeChild(this.gadget),this.gadget.destroy(),this.gadget=undefined)},hasGadget:function(){return this.config.layoutMode==="gadget"&&this.getGadget()},getGadget:function(){return this.gadget},loadGadget:function(e,t){var n,r=this,i=s.mixin({gadgetSpace:t,initData:e.data},r.config),o=function(t){r.setGadget(t,e),t.setupLifecycle()},u;r.config.async?u=function(){n=r.getGadgetFactory().getGadgetAsync(e.name,i,o,r)}:u=function(){n=r.getGadgetFactory().getGadget(e.name,i),o(n)},this.whenWindowCreated(function(){!e.data&&e.configModel?r.loadModelData(e.configModel,e.configId,{load:function(t,n,r){e.data=t,u()},error:function(e,t){u()}}):u()})},findGadget:function(e){var t=e&&e.name||e||"",n=this.findAreas(function(e){var n=e.getGadget();return n&&n.name&&n.name===t},this);return n},detach:function(){throw new Error("not implemented")},render:function(){var e=this,t=e.config.parent;this.whenWindowCreated(function(){!t.view&&!e.isWindow?t.render():e.layout.render(e,e.config.layoutMode),e.renderedOnce=!0,e.statusChange("RENDERED")})},findArea:function(e,t,n){var r;return this.subAreas.some(function(i,s){return r=e.call(t,i),!r&&n&&n&&(r=i.findArea(e,t,n)),r}),!r&&!n&&this.subAreas.some(function(i,s){r=i.findArea(e,t,n)}),r},findAreas:function(e,t){var n=[];return this.traverseAreas(function(r){e.call(t,r)&&n.push(r)}),n},traverseAreas:function(e,t){this.subAreas.forEach(function(n,r){n&&(e.call(t,n),n.traverseAreas(e,t))})},whenWindowCreated:function(e){this.config.parent.whenWindowCreated(e)},destroy:function(e){e||(this.subAreas.forEach(function(e){e&&e.destroy(!1)}),this.subAreas=[]),this.hasGadget()?this.removeGadget():this.view&&this.view.destroy(),this.statusChange("DESTROYED")},realizeLayout:function(e,t){var n,r=function(e){e.address&&e.gadget&&this.config.gadgetSpace.loadGadgetTo(e.gadget.name,e.address,!0),e.subAreas.forEach(r,this)};this.subAreas.length>0&&!t&&this.subAreas.some(function(e,t){this.removeSubAreaAtIndex(e,t)},this),typeof e=="string"?n=JSON.parse(e):n=e,r.call(this,n),this.render()},getSerializedLayout:function(){return JSON.stringify(this.asModel("GadgetAreaSchema"))}});return u}),define("smithy/GadgetAreaWindow",["./declare","./GadgetArea"],function(e,t){var n=e([t],{constructor:function(e){var t=this.config.windowRef={window:e&&e.window};t.window&&(t.window.smithyProxy={viewFactory:this.config.viewFactory,gadgetFactory:this.config.gadgetFactory}),this.pendingCalls=[],this.isWindow=!0},whenWindowCreated:function(e){var t=this,n=this.config.windowRef,r=this.config.extendedWindowConfig.url||"";n.window?n.window.smithyProxy?e():this.pendingCalls.push(e):(n.window=this.createWindow(r),this.pendingCalls.push(e),n.window.smithyCallback=function(e){e==="loaded"?t.pendingCalls.forEach(function(e){e()}):e==="unloaded"&&t.config.parent.removeSubArea(t)})},render:function(){var e=this,t=arguments;this.whenWindowCreated(function(){e.inherited(t),e.view.startup(),e.config.windowRef.window.onresize=function(t){e.view.resize()},e.rendered=!0})},createWindow:function(e){var t=window.open(e,this.getAddress(),"height=800,width=900");return t}});return n}),define("smithy/GadgetSpace",["./declare","./util","./GadgetFactory","./lifecycle/Registry","./GadgetArea","./BasePlate","./GadgetAreaWindow"],function(e,t,n,r,i,s,o){var u=new t,a=e([s,i],{constructor:function(e){var t;this.config=u.mixin({gadgetFactory:new n,gadgetSpace:this},e),this.registry=new r,this.createMainWindow()},statusChange:function(e){this.pub.GadgetSpaceStatusChange({status:e})},createSubArea:function(e){return new o(e)},createMainWindow:function(){this.config.layoutMode=undefined;var e=new o(u.mixin({window:window,parent:this},this.config));this.subAreas=[e]},addGadget:function(e,t,n){this.registry.addToRegistry(this.registry.locGadgets,e,u.mixin({name:e,factory:n||this.config.gadgetFactory},t)),this.pub.GadgetRegistrationEvent({gadget:e,event:"GADGETADDED"})},removeGadget:function(e,t){this.registry.removeFromRegistry(e,this.registry.locGadgets),this.pub.GadgetRegistrationEvent({gadget:e,event:"GADGETREMOVED"})},removeSubAreaAtIndex:function(e,t){this.inherited(arguments),t===0&&this.createMainWindow()},loadGadgetTo:function(e,t,n){var r=this.registry.getRegistryItem(this.registry.locGadgets,e),i=this.addArea(t,n);return i.loadGadget(r,this),i},moveArea:function(e,t,n){throw new Error("Not Implemented")},doesAreaExist:function(e){throw new Error("Not Implemented")},detachArea:function(e){throw new Error("Not Implemented")},enumerateGadgetDescriptors:function(e,t){this.registry.enumerateEntries(this.registry.locGadgets,function(n,r,i){e.call(t,n)})},render:function(){var e=this,t=0;this.subAreas.forEach(function(n,r){n.whenWindowCreated(function(){t+=1,n.render(),t===e.subAreas.length&&e.statusChange("RENDERED")})})}});return a}),define("smithy/SmithyProxy",["./declare","./util"],function(e,t){var n=new t,r=e(null,{constructor:function(e){if(n.isUndefined(e.gadgetFactory))throw new Error("Must supply a gadgetFactory to a SmithyProxy");if(n.isUndefined(e.viewFactory))throw new Error("Must supply a viewFactory to a SmithyProxy");if(n.isUndefined(window.smithyCallback))throw new Error("No smithyCallback defined for this window");if(!n.isUndefined(window.smithyProxy))throw new Error("There is a smithy proxy already defined for this window.");this.gadgetFactory=e.gadgetFactory,this.viewFactory=e.viewFactory,window&&!window.smithyProxy&&(window.smithyProxy=this),window.smithyCallback("loaded"),window.onbeforeunload=function(){window.smithyCallback("unloaded")}}});return r}),define("smithy/dojoviews/DojoBorderView",["../declare","dijit/layout/BorderContainer"],function(e,t){var n=e(t,{constructor:function(e){this.implementsMode="borders"},addChild:function(e,t){e.region=t,this.inherited(arguments)},removeChild:function(e){this.inherited(arguments)},hasChild:function(e){var t=this.getIndexOfChild(e);return t>-1},startup:function(){this.inherited(arguments)}});return n}),define("smithy/dojoviews/DojoTabView",["../declare","dijit/layout/TabContainer"],function(e,t){var n=e(t,{constructor:function(e){this.implementsMode="tabs"},addChild:function(e){this.inherited(arguments)},removeChild:function(e){this.inherited(arguments)},hasChild:function(e){var t=this.getIndexOfChild(e);return t>-1},startup:function(){this.inherited(arguments)}});return n}),define("smithy/dojoviews/DojoViewFactory",["../declare","dojo/dom","dojo/_base/window","./DojoBorderView","./DojoTabView"],function(e,t,n,r,i){var s=e(null,{constructor:function(e){this.rootTag=e&&e.root||"dojoRoot"},createView:function(e,s){var o,u,a,f=n.doc,l=e.isWindow?this.rootTag:e.getAddress();return e.isWindow&&!t.byId(this.rootTag)&&(a=f.createElement("div"),a.setAttribute("id",this.rootTag),n.body().appendChild(a)),s==="borders"?o=new r({style:"height:100%; width:100%"},l):s==="tabs"&&(o=new i({style:"height:100%; width:100%"},l)),o}});return s}),define("smithy/lifecycle/Messaging",["../declare","../util","./Registry","../Logger"],function(e,t,n,r){var i,s=new t,o=new r("debug"),u=e(null,i={constructor:function(e){var t=function(e){var t=this.channelFactory.get(e,this,"framework");this.pub[e]=function(n){o.debug("Sending message ["+e+"] from gadget",n),t.publish(n)},this.registry.addToRegistry(this.registry.locPublishes,t.channelName,t)};e.features.hasMessaging?(this.pub={},this.channelFactory=e&&e.channelFactory,this.registry||(this.registry=new n),t.call(this,"GadgetStatusChange")):Object.keys(i).forEach(function(e,t,n){var r=i[e];typeof r=="function"&&n.hasOwnProperty(e)&&(this[e]=function(){})},this)},setupMessaging:function(){},teardownMessaging:function(){var e=this.registry,t=e.getRegistryLocation(e.locPublishes),n=this.registry.getRegistryLocation(this.registry.locSubscribes);Object.keys(t).forEach(function(n,r,i){var s=t[n];delete this.pub[n],e.removeFromRegistry(e.locPublishes,n)},this),Object.keys(n).forEach(function(t,r,i){var s=n[t];s.unsubscribe(this),e.removeFromRegistry(e.locSubscribes,t)},this)},registerPublisher:function(e){var t=this.channelFactory.get(e,this);this.pub[t.channelName]=function(n){o.debug("Sending message ["+e+"] from gadget",n),t.publish(n)},this.registry.addToRegistry(this.registry.locPublishes,t.channelName,t)},registerSubscriber:function(e,t,n,r){var i=this.channelFactory.get(e,this),s=typeof r=="boolean"?r:!0;i.subscribe(t,n,s),this.registry.addToRegistry(this.registry.locSubscribes,i.channelName,i)},registerFrameworkSubscriber:function(e,t,n,r){var i=this.channelFactory.get(e,this,"framework"),s=typeof r=="boolean"?r:!0;i.subscribe(t,n,s),this.registry.addToRegistry(this.registry.locSubscribes,i.channelName,i)},unregisterSubscriber:function(e){var t=this.registry.getRegistryLocation(this.registry.locSubscribes)[e];s.isDefined(t)&&(t.unsubscribe(),this.registry.removeFromRegistry(this.registry.locSubscribes,t.channelName))}});return u}),define("smithy/lifecycle/Services",["../declare","./Registry","../util"],function(e,t,n){var r,i=new n,s=e(null,r={constructor:function(e){this.registry||(this.registry=new t),this.serviceFactory=e&&e.serviceFactory,e.features.hasServices||Object.keys(r).forEach(function(e,t,n){var i=r[e];typeof i=="function"&&r.hasOwnProperty(e)&&e!=="constructor"&&(this[e]=function(){})},this)},setupServices:function(){},teardownServices:function(){var e=this.registry,t=this.registry.getRegistryLocation(this.registry.locServices);Object.keys(t).forEach(function(t,n,r){e.removeFromRegistry(this.registry.locServices,t)},this)},registerService:function(e,t){var n=this.serviceFactory.getService(e,t);return this[n.name]=n,this.registry.addToRegistry(this.registry.locServices,n.name,n),n}});return s}),define("smithy/lifecycle/View",["../declare","./Registry"],function(e,t){var n=e(null,{constructor:function(){this.registry||(this.registry=new t)},setupView:function(){this.statusChange&&this.statusChange("VIEW-UP")},teardownView:function(){}});return n}),define("smithy/lifecycle/LifeCycle",["../declare","./Registry","./Messaging","./Services","./View"],function(e,t,n,r,i){var s=e([n,r,i],{constructor:function(e){e.features.hasMessaging||(this.statusChange=function(){})},statusChange:function(e){this.pub.GadgetStatusChange({name:this.name,address:this.parent.getAddress(),status:e})},setupLifecycle:function(){this.setupMessaging(),this.statusChange("MESSAGING-UP"),this.setupServices(),this.statusChange("SERVICES-UP")},teardownLifecycle:function(){this.statusChange("DESTROYING"),this.teardownView(),this.statusChange("VIEW-DN"),this.teardownServices(),this.statusChange("SERVICES-DN"),this.teardownMessaging()}});return s}),define("smithy/schema/channels/AreaStatusChange",[],function(){return{schemaId:"smithy/schema/channels/AreaStatusChange",description:"Indicates a gadget status change.",properties:{address:{type:"string",description:"address of area.",optional:!1},status:{type:"string",description:"Current status of the area.","enum":["CREATED","RENDERED","DESTROYED"],optional:!1}}}}),define("smithy/schema/channels/GadgetRegistrationEvent",[],function(){return{schemaId:"smithy/schema/channels/GadgetRegistrationEvent",description:"Indicates an event in the registration of gadgets in a gadget space.",properties:{gadget:{type:"string",description:"The name of the subject gadget.",optional:!1},event:{type:"string",description:"The registration event that occurred.","enum":["GADGETADDED","GADGETREMOVED"],optional:!1}}}}),define("smithy/schema/channels/GadgetSpaceStatusChange",[],function(){return{schemaId:"smithy/schema/channels/GadgetSpaceStatusChange",description:"Indicates a gadget space status change.",properties:{status:{type:"string",description:"Current status of the gadget space.","enum":["CREATED","RENDERED","DESTROYED"],optional:!1}}}}),define("smithy/schema/channels/GadgetStatusChange",[],function(){return{schemaId:"smithy/schema/channels/GadgetStatusChange",description:"Indicates a gadget status change.",properties:{name:{type:"string",description:"Name of gadget",optional:!1},address:{type:"string",description:"The address of the gadget's area.",optional:!1},status:{type:"string",description:"Current status of the gadget.","enum":["CREATED","MESSAGING-UP","SERVICES-UP","VIEW-UP","SERVICES-DN","VIEW-DN","DESTROYING"],optional:!1}}}}),define("smithy/schema/channels/SlagChange",[],function(){return{schemaId:"smithy/schema/channels/SlagChange",description:"Indicates a value in the slag has changed.",properties:{path:{type:"string",description:"the path or name of the slag data",optional:!1},oldValue:{type:"object",description:"The old value of the slag data."},newValue:{type:"object",description:"The new value of the slag data."}}}}),define("smithy/schema/models/GadgetAreaSchema",[],function(){return{id:"smithy/schema/GadgetAreaSchema",tag:{resolved:!1},description:"The significant properties on a GadgetArea",$schema:"http://json-schema.org/draft-03/schema",type:"object",properties:{address:{type:"string",description:"the address in the gadget space for this area",required:!0},layoutMode:{type:"string",description:"the type of layout for this area, understood by the layoutFunction for the area",required:!0},gadget:{type:"object",description:"The model schema describing the gadget.",$ref:"smithy/schema/models/GadgetSchema"},subAreas:{type:"array",description:"List of areas under this node.",required:!1,items:{$ref:"smithy/schema/models/GadgetAreaSchema"}}}}}),define("smithy/schema/models/GadgetDescriptorSchema",[],function(){return{id:"smithy/schema/GadgetDescriptorSchema",tag:{resolved:!1},description:"The significant properties of a Gadget Descriptor",$schema:"http://json-schema.org/draft-03/schema",type:"object",properties:{activationChannel:{type:"string",description:"The channel name that activates this gadget."},name:{type:"string",description:"The name of the gadget."}}}}),define("smithy/schema/models/GadgetSchema",[],function(){return{id:"smithy/schema/models/GadgetSchema",tag:{resolved:!1},description:"The significant properties of a Gadget",$schema:"http://json-schema.org/draft-03/schema",type:"object",properties:{name:{type:"string",description:"A class name resolvable by a GadgetFactory.",required:!0}}}}),define("smithy/Gadget",["./declare","./Logger","./lifecycle/LifeCycle"],function(e,t,n){var r=new t("debug"),i=e([n],{constructor:function(e){this.config=e},getView:function(){return this},destroy:function(){this.inherited(arguments),this.teardownLifecycle()}});return i}),define("smithy/ToolGadget",["./declare","./Gadget"],function(e,t){var n=e([t],{constructor:function(e){this.gadgetSpace=e.gadgetSpace}});return n}),define("smithy/fullpack",["./GadgetSpace","./SmithyProxy","./dojoviews/DojoViewFactory","./lifecycle/LifeCycle","./GadgetSpace","./schema/channels/AreaStatusChange","./schema/channels/GadgetRegistrationEvent","./schema/channels/GadgetSpaceStatusChange","./schema/channels/GadgetStatusChange","./schema/channels/SlagChange","./schema/models/GadgetAreaSchema","./schema/models/GadgetDescriptorSchema","./schema/models/GadgetSchema","./ToolGadget"],function(){});